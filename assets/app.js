(()=>{"use strict";var t,e={895:(t,e,a)=>{function n(t){t.querySelectorAll("input").forEach((function(t){t.setAttribute("tabindex","0")})),t.querySelectorAll("button").forEach((function(t){t.setAttribute("tabindex","0")})),t.querySelectorAll("a").forEach((function(t){t.setAttribute("tabindex","0")}))}function r(t,e,a,r,o,i,c){i&&document.querySelector(".body").classList.add("modal-open"),c&&c.classList.add("active"),e.forEach((function(t){t.classList.remove("active")})),a.forEach((function(t){t.classList.remove("active")}));var s=Number(t.getAttribute(r)),d=document.querySelector("[".concat(o,"='").concat(s,"']"));t.classList.add("active"),d.classList.add("active"),d.querySelector("[data-focus-input]")&&d.querySelector("[data-focus-input]").focus(),n(d)}function o(t,e,a,n){a&&document.querySelector(".body").classList.remove("modal-open"),n&&n.classList.remove("active"),t.forEach((function(t){t.classList.remove("active")})),e.forEach((function(t){t.classList.remove("active")})),e.forEach((function(t){t.querySelectorAll("input").forEach((function(t){t.setAttribute("tabindex","-1")})),t.querySelectorAll("button").forEach((function(t){t.setAttribute("tabindex","-1")})),t.querySelectorAll("a").forEach((function(t){t.setAttribute("tabindex","-1")}))}))}var i=1280,c=768,s=window.matchMedia("(min-width: ".concat(i,"px)"));window.matchMedia("(min-width: ".concat(c,"px)"));const d=function(){var t=document.querySelectorAll("form");t.length&&t.forEach((function(t){t.hasAttribute("data-search-block")||t.querySelectorAll("input").forEach((function(e){if("hidden"!==e.getAttribute("type")&&"submit"!==e.getAttribute("type")){var a,n=function(){e.validity.valueMissing?"name"==e.getAttribute("data-input-title")?a.textContent="— заполните поле «Имя»":"sec-name"==e.getAttribute("data-input-title")?a.textContent="— заполните поле «Фамилия»":"address"==e.getAttribute("data-input-title")?a.textContent="— заполните поле «Адрес»":"tel"!=e.getAttribute("type")||e.closest(".booking-popup-form")?"email"==e.getAttribute("type")?a.textContent="— заполните поле «E-mail»":"checkbox"!=e.getAttribute("type")||e.checked?a.textContent="Обязательное поле":a.textContent="— вы не можете продолжить без согласия с политикой конфиденциальности":a.textContent="— заполните поле «Телефон»":e.validity.typeMismatch?"email"==e.getAttribute("type")?a.textContent="— e-mail должен содержать символы «@», «.» проверьте правильность ввода":a.textContent="Введено некорректно":e.hasAttribute("data-readonly")&&!e.value.length?a.textContent="Обязательное поле":"tel"===e.getAttribute("type")&&(e.value.replace(/\D/g,"").length<11||"7"!=e.value.replace(/\D/g,"")[0]||"8"!=e.value.replace(/\D/g,"")[0])&&(a.textContent="Неверный номер"),a.className="form-error active"};e.hasAttribute("data-input-novalidate")||(e.hasAttribute("data-error-span-added")||("checkbox"==e.getAttribute("type")?(e.closest(".checkbox").insertAdjacentHTML("beforeend","<span class='form-error'></>"),a=e.closest(".checkbox").querySelector(".form-error")):e.closest("[data-select-input]")?(e.closest(".select-label").insertAdjacentHTML("beforeend","<span class='form-error'></>"),a=e.closest(".select-label").querySelector(".form-error")):e.hasAttribute("data-datepicker")?(e.closest(".form__label").insertAdjacentHTML("beforeend","<span class='form-error'></>"),a=e.closest(".form__label").querySelector(".form-error")):(e.insertAdjacentHTML("afterend","<span class='form-error'></>"),a=e.nextElementSibling)),e.setAttribute("data-error-span-added",""),e.addEventListener("focusout",(function(t){e.validity.valid&&!e.hasAttribute("data-readonly")&&"tel"!==e.getAttribute("type")||e.hasAttribute("data-readonly")&&!e.value.length||"tel"===e.getAttribute("type")&&11===e.value.replace(/\D/g,"").length&&("7"==e.value.replace(/\D/g,"")[0]||"8"==e.value.replace(/\D/g,"")[0])||e.hasAttribute("data-time-input")&&!e.hasAttribute("data-valid")?(a.textContent="",a.className="form-error"):n()})),t.addEventListener("submit",(function(t){t.preventDefault(),setTimeout((function(){!e.validity.valid||"checkbox"==e.getAttribute("type")&&!e.checked||e.hasAttribute("data-readonly")&&!e.value.length||e.hasAttribute("data-time-input")&&e.hasAttribute("data-valid")?(n(e.validity.valid),console.log("submit error")):(a.className="form-error",a.textContent="",console.log("submit success"))})),setTimeout((function(){e.closest("form").querySelector(".form-error.active")||(e.closest(".subscription-form")?(document.querySelector(".body").classList.add("modal-open"),document.querySelector(".modals-container").classList.add("active"),document.querySelector('[data-popup="11"]').classList.add("active")):e.closest(".product-body-consult")?(document.querySelector(".body").classList.add("modal-open"),document.querySelector(".modals-container").classList.add("active"),document.querySelector('[data-popup="13"]').classList.add("active")):e.closest("#certificates-form")||e.closest("#consult-form")?document.querySelector('[data-popup="13"]').classList.add("active"):e.closest("#booking-form")&&document.querySelector('[data-popup="16"]').classList.add("active"),e.closest("[data-cart-form]")||setTimeout((function(){e.value=""}),500))}),100)})))}}))}))};const l=function(){var t=document.querySelector("[data-tabs]"),e=document.querySelector("[data-tabs-content]");if(t&&e){var a=e.querySelectorAll("[data-content-item]");t.querySelectorAll("[data-tabs-item]").forEach((function(n,r){n.addEventListener("click",(function(){t.querySelector(".active").classList.remove("active"),n.classList.add("active"),e.querySelector(".active").classList.remove("active"),a[r].classList.add("active")}))}))}else t&&t.querySelectorAll("[data-tabs-item]").forEach((function(e,a){e.addEventListener("click",(function(){t.querySelector(".active").classList.remove("active"),e.classList.add("active")}))}))};function u(t){setTimeout((function(){(!Boolean(t.closest("form"))||t.closest("form")&&!t.closest("form").querySelector(".form-error.active"))&&(document.querySelector("[data-cart-body-stages]").classList.add("hide"),document.querySelector("[data-cart-body-result]").classList.remove("hide"),t.hasAttribute("type","submit")?(document.querySelector("[data-result-adsress]").innerText="".concat(document.querySelector("[data-dostavka-address]").value," ").concat(document.querySelector("[data-dostavka-address2]").value),document.querySelector("[data-result-samovyvos]").style.display="none"):document.querySelector("[data-result-dostavka]").style.display="none",setTimeout((function(){document.querySelector("html").scrollIntoView({behavior:"smooth"})})))}))}const f=function(){document.querySelector("[data-cart-stage-general]")&&(document.querySelector("[data-cart-big-form]")&&(document.querySelector("[data-cart-big-form]").addEventListener("click",(function(t){t.target.closest(".cart-receiving").classList.add("height-auto")})),document.querySelector("[data-cart-small-form]").addEventListener("click",(function(t){t.target.closest(".cart-receiving").classList.remove("height-auto")}))),document.querySelectorAll("[data-cart-next]").forEach((function(t){t.addEventListener("click",(function(e){setTimeout((function(){if(!Boolean(t.closest("form"))||t.closest("form")&&!t.closest("form").querySelector(".form-error.active")){var a=t.getAttribute("data-cart-next");if(s.matches){var n=document.querySelector("[data-cart-content='".concat(a,"']")),r=String(t.stageContent);n.style.height=r+"px"}e.target.closest("[data-cart-stage]").classList.remove("open"),e.target.closest("[data-cart-stage]").classList.remove("add-transition"),e.target.closest("[data-cart-stage]").classList.add("previous"),document.querySelector("[data-cart-stage='".concat(a,"']")).classList.remove("previous"),document.querySelector("[data-cart-stage='".concat(a,"']")).classList.remove("collapsed"),document.querySelector("[data-cart-stage='".concat(a,"']")).classList.add("open"),2==a&&(document.querySelector("[data-name-result]").innerText="".concat(document.querySelector("[data-cart-name]").value," ").concat(document.querySelector("[data-cart-name2]").value),document.querySelector("[data-tel-result]").innerText=document.querySelector("[data-cart-tel]").value,document.querySelector("[data-mail-result]").innerText=document.querySelector("[data-cart-mail]").value,document.querySelector("[data-note-result]").innerText=document.querySelector("[data-cart-comment]").value,l(),d(),document.querySelectorAll("[data-cart-final]").forEach((function(t){t.addEventListener("click",(function(){u(t)}))}))),setTimeout((function(){document.querySelector("[data-next-target='".concat(a,"']")).scrollIntoView({behavior:"smooth"})})),s.matches||e.target.closest("[data-cart-stage]").scrollIntoView({block:"start"})}}),110)}))})),document.querySelectorAll("[data-stage-edit]").forEach((function(t){t.addEventListener("click",(function(t){document.querySelectorAll("[data-cart-stage]").forEach((function(t){t.classList.remove("open"),t.classList.remove("add-transition"),t.classList.contains("previous")||t.classList.add("collapsed")})),t.target.closest("[data-cart-stage]").classList.remove("collapsed"),t.target.closest("[data-cart-stage]").classList.remove("previous"),t.target.closest("[data-cart-stage]").classList.add("open"),t.target.closest("[data-cart-stage]").classList.add("add-transition")}))})))};function m(){document.querySelector(".body").classList.add("modal-open"),document.querySelector(".modals-container").classList.add("active"),document.querySelector('[data-popup="5"]').classList.add("active")}function p(t){t.querySelector("input").value="",t.classList.remove("delete-active")}var v=a(344),y=a.n(v),h=a(638);function g(t,e,a){var n=h("[data-container=filters]");history.pushState(null,null,"?filter=".concat(JSON.stringify(window.filters.filter))),n.css("pointer-events","none"),h.ajax({type:"GET",url:window.location.href,dataType:"html",data:window.ajaxRequest.params?Object.assign(window.ajaxRequest.params,window.filters):window.filters,success:function(r){n.css("pointer-events","auto"),window.ajaxRequest.params=window.filters;var o=h(e),i=h(r);o.empty(),o.append(i.filter(e).children());try{window.filterSuccess[a](t,i)}catch(t){console.log(t.message)}}})}function b(t){var e=h("[data-container=filter-line]"),a=t.data("custom-val"),n=a||t.text();e.find("[data-type=filter-val]:contains(".concat(n,")")).parent().remove(),e.find("[data-type=filter-val]").length||e.find("[data-type=filter-reset]").css({display:"none"})}function w(t,e){h("[data-container=filter-line]").each((function(a,n){var r,o=h(n),i=o.find("template").clone().contents(),c=i.find("[data-type=filter-val]"),s=o.find("[data-type=filter-reset]"),d=e.data("custom-val"),l=e.text();try{r=JSON.parse(l)}catch(t){r=!1}if(Array.isArray(r)){var u=h("[data-filter-key=".concat(t,"][data-filter-line]"));u.length&&b(u.find("[data-type=filter-val]"))}var f=l;d&&(f=d,c.attr("data-setting-val",l)),i.attr("data-filter-key",t),i.attr("data-filter-line","1"),c.text(f),o.prepend(i),"block"!==s.css("display")&&s.css({display:"block"})}))}function S(t,e){h.ajax({type:"GET",url:window.location.href,dataType:"html",data:{ajax:t},success:function(t){h("".concat(e)).each((function(){h(this).empty(),h(this).append(h(t).find("[data-replace=".concat(h(this).data("replace"),"]")).children())}))}})}function x(t,e,a){var n=h("[data-type=basket-full-price]");if(n.length){var r,o=t.find("[data-type=full-price]"),i=h("[data-type=basket-price-total]"),c=h("[data-type=discount]");switch(r=o.length?+o.text():+t.find("[data-type=price]").text(),e){case"add":n.text(+n[0].textContent+r);break;case"delete":var s=+t[0].querySelector("[data-type=count]").textContent;n.text(+n[0].textContent-r*s);break;case"update":n.text("+"===a?+n[0].textContent+r:+n[0].textContent-r)}c.length&&c.text(+n[0].textContent-+i[0].textContent)}}h((function(){window.backend={templPath:h("[data-type=templ-path]").val()},h(document).on("submit","[data-type=js-form]",(function(t){console.log("form submit"),t.preventDefault();var e=h(this),a=e.attr("data-url"),n=0,r=!!e.find("[data-type=get-field-file]").length&&e.find("[data-type=get-field-file]"),o=!r&&"application/x-www-form-urlencoded; charset=UTF-8",i=!r,c=r?new FormData:{};r&&(h.each(r.files,(function(t,e){c.append("file[]",e)})),c.append("file",r[0].files[0])),e.find("[data-type=get-field]").each((function(){var t=h(this).attr("data-uf"),e=h(this).val();r?c.append(t,e):c[t]=e})),e.find("[data-type=get-field-multi]").each((function(){var t=h(this).attr("data-uf");c[t]=[]})),e.find("[data-type=get-field-multi]").each((function(){if(h(this).is(":checked")){var t=h(this).attr("data-uf"),e=h(this).attr("text");c[t][n]=e,n++}})),e.find("[data-type=get-field-radio]").each((function(){if(h(this).is(":checked")){var t=h(this).attr("data-uf"),e=h(this).attr("data-value");c[t]=e}})),h.ajax({type:"POST",url:a,dataType:"json",contentType:o,processData:i,data:c,success:function(t){if(console.log(t),t.response){var e=h(document).find("[data-type=response-text]");e.empty(),e.html(t.response)}}})})),h(document).on("click","[data-type=cookie]",(function(t){console.log("cookie"),t.preventDefault();var e="/local/templates/main/include/ajax/cookie.php",a=h(this).attr("data-name"),n={};n.name=a,h.ajax({type:"POST",url:e,data:n,success:function(t){console.log(t)}})})),h(document).on("click","[data-type=manuf-modal]",(function(t){console.log("manuf modal"),t.preventDefault();var e=h(this).attr("data-text-more"),a=h(this).html();h(document).find("[data-type=modal-manuf-name]").html(a),h(document).find("[data-type=modal-manuf-text]").html(e)})),h(document).on("click","[data-type=favor-add]",(function(t){console.log("favorite add"),t.preventDefault();var e=h(this),a="/local/templates/main/include/ajax/favor.php",n=e.attr("data-id"),r=e.attr("data-header-click"),o={};console.log(r),"remove"==r&&h(document).find("[data-type=favor-add]").each((function(){var t=h(this).attr("data-id");h(this).attr("data-header-click")||t==n&&h(this).removeClass("active")})),o.id=n,h.ajax({type:"POST",dataType:"json",url:a,data:o,success:function(t){console.log(t),console.log(t.count);var e=h(document).find("[data-type=favor-header]");h(document).find("[data-type=count-favor-header]").empty(),h(document).find("[data-type=count-favor-header]").text(t.count),0==t.count&&(e.removeClass("not-empty"),e.removeClass("active"),e.addClass("empty")),t.count>0&&(e.removeClass("empty"),e.addClass("not-empty")),h.ajax({type:"POST",url:window.location.pathname,dataType:"html",data:{favorajax:!0},success:function(t){e.empty(),e.html(t)}}),h.ajax({type:"POST",url:window.location.pathname,dataType:"html",data:{favorajaxlist:!0},success:function(t){h(document).find("[data-type=favor-list]").empty(),h(document).find("[data-type=favor-list]").html(t)}})}})})),h(document).on("click","[data-type=basket]",(function(){var t=h(this),e=t.data("event"),a=t.data("additional"),n={id:t.attr("data-id")};a&&(n=Object.assign(a,n)),h.ajax({type:"POST",url:"".concat(window.backend.templPath,"/include/ajax/basket/").concat(e,".php"),dataType:"json",data:n,success:function(a){if(a.success)try{window.basketEventSuccess[e](t,a)}catch(t){console.log(t.message)}else alert(a.message)}})})),h(document).on("click","[data-type=transfer-data]",(function(){var t=h(this),e=t.data("transfer"),a=h(t.data("success"));h.each(e,(function(t,e){a.attr(t,e)}))})),h(document).on("click","[data-type=order]",(function(t){t.preventDefault();var e=h(this),a=e.parents("[data-container=order]"),n={};a.find("[data-type=get-field]").each((function(){var t=h(this).text();t&&(n[h(this).data("field")]=t)})),a.find("[data-type=get-field-container].active").find("[data-type=get-field-select], input:checked").each((function(){var t=h(this).val(),e=h(this).data("value");(e||t)&&(n[h(this).data("field")]=t||e)})),h.ajax({type:"POST",url:"".concat(window.backend.templPath,"/include/ajax/order/add.php"),dataType:"json",data:n,success:function(t){t.success?(h("[data-type=order-result-id]").text(t.data.ID),u(e[0]),h("[data-type=basket-count]").text("0"),h("[data-cart-btn]").attr("data-header-btn","4")):alert(t.message)}})})),h(document).on("click","[data-type=pagen]",(function(){var t=h(this);h.ajax({method:"GET",url:t.data("url"),data:{ajax:"pagen"},success:function(e){var a=t.parents("[data-container=base]"),n=h(e).filter("[data-type=pagen]").length?h(e).filter("[data-type=pagen]"):h(e).find("[data-type=pagen]");a.find("[data-container=items]").append(h(e).filter("[data-container=items]").children()),a.find("[data-type=pagen]").remove(),n.length&&a.find("[data-type=pagen-append]").append(n)}})})),function(){var t=h(document).find("#booking-form");if(t){var e=t.find("[data-uf=UF_SEC]").val(),a=t.find("[data-uf=UF_PLACE]"),n=!1;t.find("[data-type=place-option]").each((function(){var t=h(this).attr("data-path"),a=h(this).attr("data-select-option");e==t&&(n=a)})),n&&(a.attr("placeholder",n),a.val(n),t.find("[data-booking=date]").removeAttr("disabled"),t.find("[data-type=par-date-div]").removeClass("disabled"))}}(),h(document).on("click","[data-booking=date]",(function(){var t=h(this).val(),e=h(this).siblings(".datepicker"),a=h(this).parents("#booking-form"),n=a.find("[data-uf=UF_PLACE]").val(),r={};e.hasClass("active")||(r.date=t,r.place=n,h.ajax({type:"POST",url:"".concat(window.backend.templPath,"/include/ajax/booking.php"),dataType:"json",data:r,success:function(t){if(console.log(t),t.success){var e=a.find("[data-uf=UF_TIME]"),n=a.find("[data-type=tooltip-date]"),r=a.find("[data-type=tooltip-date-block]");e.removeAttr("disabled"),e.removeClass("disabled"),r.removeAttr("style"),n.empty(),n.html(t.tooltip)}}}))})),h(document).on("click","[data-type=place-option]",(function(){var t=h(this).parents("#booking-form"),e=t.find("[data-uf=UF_TIME]"),a=t.find("[data-uf=UF_DATE]"),n=t.find("[data-type=par-date-div]"),r=t.find("[data-type=tooltip-date-block]");e.val(""),a.val(""),e.attr("disabled",""),r.attr("style","display:none;"),a.removeAttr("disabled"),n.removeClass("disabled")})),function(){var t=h(document).find("[data-time-input]");t.on("change",(function(){var e=h(this).val(),a=h(this).parents("#booking-form"),n=a.find("[data-uf=UF_PLACE]").val(),r=a.find("[data-uf=UF_DATE]").val(),o=h(this).siblings(".form-error"),i=a.find("[data-type=tooltip-date-block]"),c={};c.date=r,c.place=n,c.time=e,h.ajax({type:"POST",url:"".concat(window.backend.templPath,"/include/ajax/booking.php"),dataType:"json",data:c,success:function(e){e.txter&&(i.addClass("active"),o.addClass("active"),o.html(e.txter),t.attr("data-valid","no")),e.txter||(t.removeAttr("data-valid"),o.removeClass("active"),o.html())}})}))}(),function(){var t=h(document).find("[data-input=check]");t.on("change",(function(){var e=h(this),a=e.val(),n=e.parents("[data-type=js-form]").attr("data-url"),r=t.siblings(".form-error"),o={};o.UF_EMAIL=a,o.type="check",h.ajax({type:"POST",url:n,dataType:"json",data:o,success:function(t){t.txter&&(e.val(""),r.addClass("active"),r.html(t.txter)),t.txter||(r.removeClass("active"),r.html())}})}))}(),h(document).on("change","[data-type=promo-add]",(function(){h.ajax({type:"POST",url:"".concat(window.backend.templPath,"/include/ajax/promo/add.php"),dataType:"json",data:{code:h(this).val()},success:function(t){t.success?(S("promo","[data-replace=items-list], [data-replace=preview-items-list], [data-replace=price], [data-replace=header-basket-items]"),h(".cart-promocode-error").removeClass("active")):h(".cart-promocode-error").addClass("active")}})})),h(document).on("click","[data-type=promo-delete]",(function(){var t=h(this).parents("[data-container=promo-code]");h.ajax({type:"POST",url:"".concat(window.backend.templPath,"/include/ajax/promo/delete.php"),dataType:"json",data:{code:t.find("[data-type=promo-add]").val()},success:function(e){e.success?(S("promo","[data-replace=items-list], [data-replace=preview-items-list], [data-replace=price], [data-replace=header-basket-items]"),p(t[0]),h(".cart-promocode-error").removeClass("active")):alert(e.message)}})})),document.querySelectorAll("#range-slider").forEach((function(t){t.noUiSlider.on("set",(function(t){var e=h(this.target),a=e.parents("[data-filter-key]"),n=a.data("filter-key"),r=a.parents("[data-link-container]"),o=r.data("entity"),i=r.data("link-container");document.querySelectorAll("[data-filter-key=".concat(n,"]")).forEach((function(e){var n=e.querySelector("#range-slider");n&&e.getAttribute("data-template-type")!==a.attr("data-template-type")&&n.noUiSlider.set(t,!1)})),w(n,h('<div data-custom-val="'.concat(a.find("[data-type=filter-name]").text(),": от ").concat(Math.round(t[0])," до ").concat(Math.round(t[1]),'">').concat(JSON.stringify(t),"</div>"))),window.filters.filter[n]=t,g(e,i,o)}))})),h(document).on("click","[data-type=filter]",(function(){var t=h(this),e=t.parents("[data-filter-key]").length?t.parents("[data-filter-key]").attr("data-filter-key"):t.attr("data-filter-key"),a=(t.parents("[data-container=filter-item]").length?t.parents("[data-container=filter-item]"):t).find("[data-type=filter-val]"),n=a.data("setting-val"),r=a.text(),o=n||r,i=t.parents("[data-link-container]").attr("data-link-container"),c=t.parents("[data-entity]"),s=c.data("entity"),d=h("[data-filter-key=".concat(e,"]")).find("[data-type=filter-val]:contains(".concat(o,")")).filter((function(t,e){return h(e).parents("[data-entity]").attr("data-place")!==c.attr("data-place")})),l=function(t,e,a){return Array.isArray(a)?(delete window.filters.filter[e],b(t),h("[data-filter-key=".concat(e,"]")).find("#range-slider").each((function(t,e){e.noUiSlider.set([+e.getAttribute("data-range-min"),+e.getAttribute("data-range-max")],!1)})),"disable"):(window.filters.filter[e]||(window.filters.filter[e]={}),window.filters.filter[e][a]?(delete window.filters.filter[e][a],b(t),n="disable",Object.keys(window.filters.filter[e]).length||delete window.filters.filter[e]):(window.filters.filter[e][a]=a,w(e,t),n="enable"),n);var n}(a,e,o);d.each((function(t,e){try{window.filtersEvent.styles[l][e.getAttribute("data-style")](h(e))}catch(t){console.log(t.message)}})),g(t,i,s)})),h(document).on("click","[data-type=filters]",(function(){var t=h(this),e=t.parents("[data-entity]"),a=e.data("entity"),n=e.data("link-container"),r=t.find("[data-type=filter-val]"),o=JSON.parse(r.text());if(function(){for(var t in window.filters.filter)for(var e in window.filters.filter[t])h("[data-filter-key=".concat(t,"]")).find("[data-type=filter-val]:contains(".concat(e,")")).each((function(t,e){try{window.filtersEvent.styles.disable[e.getAttribute("data-style")](h(e))}catch(t){console.log(t.message)}}));window.filters.filter={}}(),t.hasClass("active"))t.removeClass("active");else for(var i in t.addClass("active"),o)if(Array.isArray(o[i]))window.filters.filter[i]=o[i];else for(var c in window.filters.filter[i]={},o[i])h("[data-filter-key=".concat(i,"]")).find("[data-type=filter-val]:contains(".concat(c,")")).filter((function(t,a){return h(a).parents("[data-entity]").attr("data-place")!==e.attr("data-place")})).each((function(t,e){try{window.filtersEvent.styles.enable[e.getAttribute("data-style")](h(e))}catch(t){console.log(t.message)}})),window.filters.filter[i][c]=c;g(t,n,a)})),h(document).on("click","[data-type=filter-reset]",(function(){var t,e,a=h(this),n=a.parents("[data-entity]"),r=n.data("entity"),o=n.data("link-container");window.filters.filter={},t=h("[data-container=filter-line]"),e=h("[data-type=filter-val]"),t.find("[data-type=filter]").remove(),t.find("[data-type=filter-reset]").css({display:"none"}),e.each((function(t,e){var a=h(e);try{window.filtersEvent.styles.disable[a.data("style")](a)}catch(t){console.log(t.message)}})),g(a,o,r)})),h(document).on("input","[data-search]",(function(){var t=h(this),e=t.parents("[data-search-container]"),a=t.val();e.find("[data-type=filter-val]").each((function(t,e){new RegExp(a).test(e.textContent)?h(e).parents("[data-container=filter-item]").css("display","flex"):h(e).parents("[data-container=filter-item]").css("display","none")}))})),h(document).on("click","[data-show-all]",(function(){var t=h(this),e=t.parents("[data-filter-key]").attr("data-filter-key"),a=h("[data-filter-key=".concat(e,"][data-filter-all]")),n=t.data("show-obj"),r=h("[data-show=".concat(t.data("show-all"),"]")),o=r.find("[data-filter-key]"),i=o.attr("data-filter-key"),c=r.find("[data-container=content]");if(i!==e){var s=r.find("template");for(var d in c.empty(),o.attr("data-filter-key",e),n.replace)r.find("[data-replace=".concat(d,"]")).text(n.replace[d]);a.find("[data-container=filter-item]").each((function(t,e){var a=s.clone().contents();a.find("[data-type=filter-val]").text(e.querySelector("[data-type=filter-val]").textContent),a.find("[data-type=filter-count]").text(e.querySelector("[data-type=filter-count]").textContent),c.append(a)}))}c.find("[data-container=filter-item]").each((function(t,e){var n=h(e),r=n.find("input"),o=a.find("[data-container=filter-item]").eq(t);r.prop("checked",o.find("input").prop("checked")),1!==o.css("opacity")&&n.css({opacity:o.css("opacity"),"pointer-events":o.css("pointer-events")})}))})),h(document).on("click","[data-type=search]",(function(){var t=h(this),e=t.parents("[data-container=search]"),a=e.data("link-container"),n=e.data("entity");h.ajax({type:"GET",url:window.location.href,dataType:"html",data:{q:e.find("input").val(),ajax:"filter"},success:function(e){var r=h(a),o=h(e);r.empty(),r.append(o.find(a).children());try{window.filterSuccess[n](t,o)}catch(t){console.log(t.message)}}})})),h(document).on("submit","[data-type=form]",(function(){var t=h(this),e={};t.find("[data-type=get-field]").each((function(t,a){var n=h(a);e[n.data("field")]=n.val()})),h.ajax({type:"POST",url:"".concat(window.backend.templPath,"/include/ajax/form/add.php"),dataType:"json",data:e,success:function(e){if(e.success)try{window.formSuccess[t.data("event")](t)}catch(t){console.log(t.message)}else alert(e.message)}})})),h(document).on("change","[data-type=sort]",(function(){var t=h(this),e=t.parents("[data-link-container]").data("link-container"),a=h(e),n={ajax:"sort",sort:{field:t.data("field"),by:t.data("by")}},r=n;window.ajaxRequest.params&&(r=Object.assign(window.ajaxRequest.params,n)),h.ajax({type:"GET",url:window.location.href,dataType:"html",data:r,success:function(t){window.ajaxRequest.params=n,a.empty(),a.append(h(t).filter(e).children())}})})),function(){if(!window.location.search)return;var t=decodeURI(window.location.search.replace("?","")).split("&"),e=null;if(t.forEach((function(t){var a=t.split("=");if("filter"===a[0])return e=a[1],!1})),!e)return;for(var a in window.filters.filter=JSON.parse(e),window.filters.filter)for(var n in window.filters.filter[a]){var r=h("[data-filter-key=".concat(a,"]")),o=r.find("[data-type=filter-val]:contains(".concat(n,")"));if(!o.length){w(a,h('<div data-custom-val="'.concat(r[0].querySelector("[data-type=filter-name]").textContent,": от ").concat(Math.round(window.filters.filter[a][0])," до ").concat(Math.round(window.filters.filter[a][1]),'">').concat(JSON.stringify(window.filters.filter[a]),"</div>")));break}o.each((function(t,e){try{window.filtersEvent.styles.enable[e.getAttribute("data-style")](h(e))}catch(t){console.log(t.message)}})),w(a,h(o[0]))}}()})),window.ajaxRequest={},window.formSuccess={consultation:function(t){}},window.filterCompare={items:function(t,e,a){t.find("[data-type=filter-val]").each((function(){var n,r=h(this).parents("[data-container=filter-item]").length?h(this).parents("[data-container=filter-item]"):h(this).parents("[data-type=filter]"),o=h(this).attr("data-custom-compare"),i=h(this).text(),c=t.attr("data-filter-key");if((n=o?e.find("[data-type=filter-val][data-custom-compare=".concat(o,"]")):e.find("[data-type=filter-val]").filter((function(t,e){return e.textContent===i}))).length){var s=n.parents("[data-container=filter-item]").length?n.parents("[data-container=filter-item]"):n.parents("[data-type=filter]");r.css(a.enable),r.find("[data-type=filter-count]").text(s.find("[data-type=filter-count]").text())}else{if(r.css(a.disable),!window.filters.filter.hasOwnProperty(c))return;if(!window.filters.filter[c].hasOwnProperty(i))return;h("[data-filter-key=".concat(c,"]")).find("[data-type=filter-val]").filter((function(t,e){return e.textContent===i})).each((function(t,e){console.log(h(e)),window.filtersEvent.styles.disable[h(e).attr("data-style")](h(e))})),delete window.filters.filter[t.data("filter-key")][i]}}))},range:function(t,e){var a=e.find("#range-slider"),n=+a.attr("data-range-min"),r=+a.attr("data-range-max");t[0].querySelector("#range-slider").noUiSlider.updateOptions({range:{min:n,max:r},start:[n,r]},!1)}},window.filterSuccess={shop:function(t,e){var a=h("[data-container=filters]"),n=e.find("[data-container=filters]");h("[data-type=replace-elem]").each((function(t,a){var n=h(a),r=n.data("field"),o=e.find("[data-type=replace-elem][data-field=".concat(r,"]")).text();n.text(o)})),function(t,e,a){var n=Object.keys(window.filters.filter),r=n[n.length-1],o={enable:{opacity:1,"pointer-events":"auto"},disable:{opacity:.3,"pointer-events":"none"}};e.each((function(e,n){h(n).find("[data-container=filter]").each((function(){var n=h(this).attr("data-filter-key");if(n!==r||"filters"===t.data("type")){var i=a.eq(e).find("[data-container=filter][data-filter-key=".concat(n,"]"));i.length?(window.filterCompare[h(this).attr("data-compare")](h(this),i,o),h(this).css(o.enable)):h(this).css(o.disable)}}))}))}(t,a,n)}},window.filters={filter:{},ajax:"filter"},window.filtersEvent={styles:{enable:{checkbox:function(t){t.parents("[data-container=filter-item]").find("[data-type=filter]").prop("checked",!0)},button:function(t){t.parent().addClass("active")}},disable:{checkbox:function(t){t.parents("[data-container=filter-item]").find("[data-type=filter]").prop("checked",!1)},button:function(t){t.parent().removeClass("active")},none:function(t){var e=t.closest("[data-container]");t.parent().remove(),e.find("[data-type=filter]").length||e.find("[data-type=filter-reset]").css("display","none")}}}},window.addEventListener("popstate",(function(){console.log(JSON.parse(decodeURI(window.location.search.replace("?",""))))})),window.basketEventSuccess={delete:function(t){o(document.querySelectorAll("[data-popup-button]"),document.querySelectorAll("[data-popup]"),!0,document.querySelector(".modals-container"));var e=h("[data-item-id=".concat(t.attr("data-id"),"]")),a=h("[data-type=basket-count]"),n=h("[data-type=basket-price-total]"),r=+e[0].querySelector("[data-type=price]").textContent,i=+e[0].querySelector("[data-type=count]").textContent,c=h("[data-type=basket-items-count]"),s=h("[data-event=add][data-id=".concat(e.attr("data-product-id"),"]")),d=1===e.filter("[data-type=item-modal]").parent().find("[data-type=item-modal]").length;if(h("[data-reload]").length&&d)document.location.href=window.location.href;else{if(d){var l=h("[data-cart-btn]");l.attr("data-header-btn","4"),l.removeClass("active"),h("[data-cart-modal]").removeClass("active")}e.remove(),a.text(+a.text()-1),n.text(+n[0].textContent-r*i),c.length&&c.text(+c[0].textContent-i),s.length&&(s.parents("[data-type=item]").removeClass("in-cart"),s.attr("data-type","basket"),s.text("Добавить в корзину")),x(h(e[0]),"delete"),t.data("reload")&&S("deliveries","[data-replace=deliveries]")}},add:function(t,e){h("[data-cart-btn]").attr("data-header-btn","6");var a=t.parents("[data-type=item]"),n=t.data("id"),r=h("[data-container=header-basket]").find("[data-product-id=".concat(n,"]")),o=h("[data-type=basket-price-total]"),i=h("[data-type=basket-items-count]");if(r.length){var c=r.find("[data-type=count]");c.text(+c[0].textContent+1)}else{var s=h("[data-entity-template=basket]"),d=h("[data-type=basket-count]");a.addClass("in-cart"),a.find("[data-type=basket]").text("В корзине"),t.removeAttr("data-type"),h("[data-field-replace]").each((function(t,e){var n=h(e),r=a.find("[data-field=".concat(n.data("field-replace"),"]")),o=r.val()?r.val():r.text();n.html(o)})),h("[data-replace-img]").each((function(t,e){h(e).attr("src",a.find("[data-field-img]").attr("src"))})),m(),s.each((function(t,r){var o=h(r).clone().contents();o.filter("[data-item-id]").attr("data-item-id",e.data.ID),o.filter("[data-product-id]").attr("data-product-id",n),o.find("[data-id]").attr("data-id",e.data.ID),o.find("img").attr("src",a.find("img").attr("src")),a.find("[data-field]").each((function(){var t=h(this).val(),e=t||h(this).text();o.find("[data-field=".concat(h(this).data("field"),"]")).html(e)}));var i=o.find("[data-type=transfer-data]");i.length&&i.attr("data-transfer",'{"data-id": '.concat(e.data.ID,"}")),h(r).parent().append(o)})),d.text(+d[0].textContent+1)}o.text(+o[0].textContent+ +a.find("[data-type=price]").text()),i.length&&i.text(+i[0].textContent+1),x(a,"add"),t.data("reload")&&S("4_items","[data-replace=4-items]")},update:function(t){var e=h("[data-item-id=".concat(t.attr("data-id"),"]")),a=+e[0].querySelector("[data-type=price]").textContent,n=e.find("[data-type=calc-price]"),r=e.find("[data-type=full-price]"),o=h("[data-type=basket-price-total]"),i=t.parent().find("[data-type=count-stepper]").text();if(r.length){var c=(+r[0].textContent-+n[0].textContent)/("+"===t.data("additional").operator?+i-1:+i+1);r.text("+"===t.data("additional").operator?+r[0].textContent+(a+c):+r[0].textContent-(a+c))}e.find("[data-type=count]").text(i),e.find("[data-type=count-stepper]").text(i),o.text("+"===t.data("additional").operator?+o[0].textContent+a:+o[0].textContent-a),n.text("+"===t.data("additional").operator?+n[0].textContent+a:+n[0].textContent-a);var s=0;t.parents("[data-type=replace]").find("[data-item-id]").each((function(){s+=+h(this).find("[data-type=count-stepper]").text()})),h("[data-type=basket-items-count]").text(s),x(h(e[0]),"update",t.data("additional").operator)}};var q=a(566),L=a.n(q);const k=function(){var t=document.querySelector("[data-time-input]");t&&(t.setAttribute("placeholder","Введите время"),t.addEventListener("focusin",(function(){t.setAttribute("placeholder","__:__")})),Maska.create(t,{tokens:{h:{pattern:/[1-2]/},H:{pattern:/[0-9]/},m:{pattern:/[0-5]/},M:{pattern:/[0-9]/}}}))};var A=a(820),E=a(656);const C=function(){Object.assign(A.Z.locales,E.Z);var t=document.querySelector("[data-datepicker]"),e=document.querySelector("[data-time-input]");if(t){var a=new Date,n=a.toLocaleDateString("en-GB").replace(/\D/g,"/"),r="31/12/"+String(a.getFullYear()+1),o={0:"voskr",1:"pnd",2:"vtor",3:"sreda",4:"chet",5:"pyat",6:"sub"};new A.Z(t,{format:"dd/mm/yyyy",autohide:!0,language:"ru",orientation:"top",maxView:2,minDate:n,maxDate:r,prevArrow:'<svg class="datepicker-arrow" width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M6 11L1 6L6 1" stroke="#1B1B1B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n      </svg>',nextArrow:'<svg class="datepicker-arrow next" width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M6 11L1 6L6 1" stroke="#1B1B1B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n      </svg>'});t.addEventListener("changeDate",(function(t){var a=t.detail.date.getDay(),n=o[a];e.setAttribute("data-weekday","".concat(n))})),s.matches||document.querySelector("[data-datepicker]").addEventListener("click",(function(){setTimeout((function(){document.querySelector("[data-datepicker]").scrollIntoView({behavior:"smooth",block:"end"})}))}))}};function T(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return j(t,e)}(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==a.return||a.return()}finally{if(c)throw o}}}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}const _=function(){var t,e=document.querySelectorAll('input[type="tel"]'),a=function(t){return t.value.replace(/\D/g,"")},n=function(t){var e=t.target,n=a(e),r=t.clipboardData||window.clipboardData;if(r){var o=r.getData("Text");if(/\D/g.test(o))return void(e.value=n)}},r=function(t){var e=t.target,n=a(e),r=e.selectionStart,o="";if(!n)return e.value="";if(e.value.length==r){if(["7","8","9"].indexOf(n[0])>-1){"9"==n[0]&&(n="7"+n);var i="8"==n[0]?"8":"+7";o=e.value=i+" ",n.length>1&&(o+="("+n.substring(1,4)),n.length>=5&&(o+=") "+n.substring(4,7)),n.length>=8&&(o+="-"+n.substring(7,9)),n.length>=10&&(o+="-"+n.substring(9,11))}else o="+"+n.substring(0,16);if(/^\+0+/g.test(o)){var c=o.replace(/^\+0+/g,"");c.length>0?e.value="+".concat(c):e.value=""}else e.value=o.replace(/^\+0+/g,"")}else t.data&&/\D/g.test(t.data)&&(e.value=n)},o=function(t){var e=t.target.value.replace(/\D/g,"");8==t.keyCode&&1==e.length&&(t.target.value="")},i=T(e);try{for(i.s();!(t=i.n()).done;){var c=t.value;c.addEventListener("keydown",o),c.addEventListener("input",r,!1),c.addEventListener("paste",n,!1)}}catch(t){i.e(t)}finally{i.f()}};const O=function(){var t=document.querySelectorAll("[data-select-context]"),e=document.querySelector("[data-time-input]"),a={Ресторан:"rest","Сигарный лаунж":"lounge","Кабинет Фрейда":"cabinet"};t.length&&t.forEach((function(t){t.addEventListener("click",(function(t){var n=t.target.closest("[data-select-context]"),r=t.target.closest("[data-select-input]"),o=t.target.closest("[data-select]"),i=t.target.closest("[data-select-option]"),c=n.querySelector(".select-label.active")&&t.target.closest("[data-select-context]")&&!t.target.closest("[data-select]");r?function(t){var e=document.querySelectorAll("[data-select-label]"),a=t.closest("[data-select-label]");a.classList.contains("active")?a.classList.remove("active"):(e.forEach((function(t){t.classList.remove("active")})),a.classList.add("active"))}(r):o?i&&function(t){var n=t.closest(".select-label.active"),r=n.querySelector("input"),o=t.getAttribute("data-select-option");r.value=o,e.setAttribute("data-place","".concat(a[o])),n.classList.remove("active")}(i):c&&n.querySelector(".select-label.active").classList.remove("active")}))}))};var P=a(6);function M(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const D=function(){new P.ZP("#restaurant-slider",{modules:[P.W_,P.tl],loop:!0,navigation:{nextEl:"#restaurant-slider-next",prevEl:"#restaurant-slider-prev"},pagination:{el:"#restaurant-slider-pagination"}}),new P.ZP("#reviews-slider",{modules:[P.W_,P.tl],slidesPerView:1.1,spaceBetween:15,breakpoints:(t={},M(t,768,{slidesPerView:"auto"}),M(t,1280,{spaceBetween:30,slidesPerView:"auto"}),t),navigation:{nextEl:"#reviews-slider-next",prevEl:"#reviews-slider-prev"},pagination:{el:"#reviews-slider-pagination"}}),new P.ZP("#shop-slider",{modules:[P.W_],slidesPerView:"auto",spaceBetween:15,breakpoints:M({},1280,{spaceBetween:30}),navigation:{nextEl:"#shop-slider-next",prevEl:"#shop-slider-prev"}}),new P.ZP("#articles-slider",{modules:[P.W_],slidesPerView:"auto",spaceBetween:30,navigation:{nextEl:"#articles-slider-next",prevEl:"#articles-slider-prev"}}),new P.ZP("#categories-slider",{modules:[P.W_],slidesPerView:"auto",spaceBetween:20,loop:!0,breakpoints:M({},1280,{slidesPerView:3,spaceBetween:30}),navigation:{nextEl:"#categories-slider-next",prevEl:"#categories-slider-prev"}}),new P.ZP("#humidor-slider",{modules:[P.Gk],slidesPerView:"auto",spaceBetween:15,centeredSlides:!0,initialSlide:1,mousewheel:{releaseOnEdges:!0,eventsTarget:".humidor-slider-overlay"},breakpoints:(e={},M(e,768,{centeredSlides:!1}),M(e,1280,{spaceBetween:30,initialSlide:0,centeredSlides:!1}),e)});var t,e,a=new P.ZP("#gallery-slider",{modules:[P.Gk,P.W_],slidesPerView:"auto",mousewheel:!0,slideToClickedSlide:!0,breakpoints:M({},1280,{direction:"vertical"}),navigation:{nextEl:"#gallery-slider-next",prevEl:"#gallery-slider-prev"}});new P.ZP("#product-slider",{modules:[P.o3],thumbs:{swiper:a}})};const B=function(){var t=document.querySelector(".humidor-slider2-section");if(s.matches&&t){var e=t.querySelector(".humidor-slider2-slider"),a=document.querySelector(".humidor-slider2-container");a.style.top="".concat(document.documentElement.clientHeight/2-a.offsetHeight/2,"px"),addEventListener("scroll",(function(){var a=Math.min(Math.max(0,-(t.getBoundingClientRect().top-innerHeight/4))/(t.getBoundingClientRect().height-innerHeight/4*3),1);e.style.transform="translateX(-".concat((e.getBoundingClientRect().width-innerWidth)*a,"px)")}))}};var H=a(386);const F=function(){var t=document.querySelectorAll(".js-badger-accordion");Array.from(t).forEach((function(t){new H.Z(t)}))};const I=function(t,e,a){var n=document.querySelector(".modals-container"),i=document.querySelectorAll("[".concat(e,"]")),c=document.querySelectorAll("[".concat(a,"]"));if(i&&c){var s=t.target.closest("[".concat(e,"]")),d=n.classList.contains("active")&&!t.target.closest("[".concat(a,"]"))&&!t.target.closest("[".concat(e,"]"))&&!t.target.closest(".datepicker-view")||t.target.closest("[data-modal-close]");s?r(s,i,c,e,a,true,n):d&&o(i,c,true,n)}};const U=function(t,e,a,i){var c=document.querySelectorAll("[".concat(e,"]")),s=document.querySelectorAll("[".concat(a,"]")),d=!1;if(c&&s){var l,u=t.target.closest("[".concat(e,"]"));"mouseenter"==t.type&&u?function(t,e,a,r,i,c,s,d){if(t.classList.contains("active"))o(r,i,c,s);else{c&&document.querySelector(".body").classList.add("modal-open"),s&&s.classList.add("active");var l=Number(t.getAttribute(e)),u=document.querySelector("[".concat(a,"='").concat(l,"']"));r.forEach((function(t){t.getAttribute(e)!==l&&t.classList.remove("active")})),i.forEach((function(t){t.classList.contains("header-modals__item")?t!==u&&(t.style.zIndex="4",setTimeout((function(){t.classList.remove("active"),t.style.zIndex=""}),300)):t.classList.remove("active")})),t.classList.add("active"),u.classList.add("active"),u.querySelector("[data-focus-input]")&&u.querySelector("[data-focus-input]").focus(),n(u),document.querySelector(".header__top").addEventListener("mouseover",(function(t){t.relatedTarget==document.querySelector(".header__bottom")&&o(r,i,c,s)})),document.querySelector("[data-drop-close]").addEventListener("mouseover",(function(t){o(r,i,c,s)})),document.addEventListener("mouseover",(function t(e){e.target.closest(".header")||(o(r,i,c,s),document.removeEventListener("mouseover",t))})),document.addEventListener("click",(function(t){document.querySelector(".active[".concat(a,"]"))&&!t.target.closest("[".concat(e,"]"))&&!t.target.closest("[".concat(a,"]"))&&o(r,i,c,s)}))}}(u,e,a,c,s,i,d):"click"==t.type&&(l=document.querySelector(".active[".concat(a,"]"))&&!u&&!t.target.closest("[".concat(a,"]")),u&&!u.classList.contains("active")?r(u,c,s,e,a,i,d):(u&&u.classList.contains("active")||l)&&o(c,s,i,d))}};var R=document.querySelector("[data-type=site-templ-path]");window.config={path:window.location.hostname&&"cloudmill.github.io"!==window.location.hostname?R?R.value:"/local/templates/main/":""};const N=function(t){var e=document.querySelector(".first-screen"),a=document.querySelector(".section-bg-vid__video");e&&"DOMContentLoaded"==t.type&&!s.matches?(setTimeout((function(){document.querySelectorAll("[data-video-show]").forEach((function(t){t.classList.add("loaded")})),document.querySelectorAll("[data-fade-up]").forEach((function(t){t.classList.add("loaded")})),document.querySelector(".first-screen__ttl").classList.add("loaded")}),1e3),setTimeout((function(){document.querySelector(".first-screen__ttl").classList.add("blend-mode")}),1200)):e&&"load"==t.type&&s.matches&&(document.querySelectorAll("[data-video-show]").forEach((function(t){t.classList.add("loaded")})),document.querySelectorAll("[data-fade-up]").forEach((function(t){t.classList.add("loaded")})),document.querySelector(".first-screen__ttl").classList.add("loaded"),document.querySelector(".first-screen__ttl").classList.add("blend-mode")),a&&"load"==t.type&&setTimeout((function(){s.matches?(a.setAttribute("src","".concat(window.config.path,"assets/videos/interior-bg-vid.mp4")),a.play(),a.setAttribute("autoplay","")):s.matches||(a.setAttribute("src","".concat(window.config.path,"assets/videos/interior-bg-vid-mob.mp4")),a.play(),a.setAttribute("autoplay",""))}),1e3)};const V=function(){var t=document.querySelectorAll("#range-slider");t.length&&t.forEach((function(t){var e=Number(t.getAttribute("data-range-min")),a=Number(t.getAttribute("data-range-max")),n=t.closest("#range-slider-container"),r=n.querySelector("#range-from"),o=n.querySelector("#range-to");y().create(t,{start:[e,a],connect:!0,range:{min:e,max:a}}),t.noUiSlider.on("update",(function(t,e){var a=t[e];e?o.value=Math.round(a):r.value=Math.round(a)})),r.addEventListener("change",(function(){t.noUiSlider.set([this.value,null])})),o.addEventListener("change",(function(){t.noUiSlider.set([null,this.value])}))}))};const Z=function(t){setTimeout((function(){document.querySelector(".header").classList.add("loaded"),document.querySelector(".filter-drops-container")&&document.querySelector(".filter-drops-container").classList.add("loaded")}),1200),"true"==document.querySelector(".body").getAttribute("data-js")&&L().init({once:!0,offset:0,duration:1200})};const z=function(){s.matches||(document.querySelector("[data-menu-btn]").addEventListener("click",(function(){document.querySelector("[data-mobile-menu]").classList.toggle("active"),document.querySelector("[data-menu-btn]").classList.toggle("active"),document.querySelector(".mobile-menu-item.active")&&document.querySelector(".mobile-menu-item.active").classList.remove("active")})),document.querySelectorAll("[data-menu-link]").forEach((function(t){t.addEventListener("click",(function(e){var a=t.getAttribute("data-menu-link");document.querySelector("[data-menu-item='".concat(a,"'")).classList.add("active")}))})),document.querySelectorAll("[data-menu-close]").forEach((function(t){t.addEventListener("click",(function(t){t.target.closest(".mobile-menu-item.active").classList.remove("active")}))})))};const G=function(t){t.target.closest(".mobile-nav__item")&&t.target.closest(".mobile-nav__item").hasAttribute("data-popup-button")?(t.target.closest(".mobile-nav__item").classList.add("active"),t.target.closest(".mobile-nav").classList.add("index-raise"),t.target.closest(".mobile-nav__item").removeAttribute("data-popup-button"),t.target.closest(".mobile-nav__item").setAttribute("data-modal-close","data-modal-close")):t.target.closest(".mobile-nav__item")&&t.target.closest(".mobile-nav__item").hasAttribute("data-modal-close")&&(t.target.closest(".mobile-nav__item").removeAttribute("data-modal-close"),t.target.closest(".mobile-nav__item").setAttribute("data-popup-button","14"),t.target.closest(".mobile-nav__item").classList.remove("active"),setTimeout((function(){t.target.closest(".mobile-nav").classList.remove("index-raise")}),300))};var W=document.querySelector("[data-type=site-templ-path]");window.config={path:window.location.hostname&&"cloudmill.github.io"!==window.location.hostname?W?W.value:"/local/templates/main/":""},document.addEventListener("DOMContentLoaded",(function(t){var e,a,n;document.querySelector(".body").setAttribute("data-js","true"),N(t),z(),D(),(e=document.querySelectorAll(".header__buttons-icon")).length&&e.forEach((function(t){t.hasAttribute("data-drop-empty")?t.hasAttribute("data-fav-btn")?t.setAttribute("data-header-btn","3"):t.hasAttribute("data-cart-btn")&&t.setAttribute("data-header-btn","4"):t.hasAttribute("data-fav-btn")?t.setAttribute("data-header-btn","5"):t.hasAttribute("data-cart-btn")&&t.setAttribute("data-header-btn","6")})),function(){if(document.querySelector("#map"))try{ymaps.ready((function(){var t=new ymaps.Map("map",{center:[59.934277,30.309636],zoom:14},{searchControlProvider:"yandex#search"}),e=(ymaps.templateLayoutFactory.createClass('<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>'),new ymaps.Placemark([59.934277,30.309636],{},{iconLayout:"default#image",iconImageHref:window.config.path+"assets/images/placemark.svg",iconImageSize:[45.71,64],iconImageOffset:[-22,-64]}));t.geoObjects.add(e)}))}catch(t){console.error(t)}if(document.querySelector("#map2"))try{ymaps.ready((function(){var t=new ymaps.Map("map2",{center:[59.934277,30.309636],zoom:14},{searchControlProvider:"yandex#search"}),e=(ymaps.templateLayoutFactory.createClass('<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>'),new ymaps.Placemark([59.934277,30.309636],{},{iconLayout:"default#image",iconImageHref:window.config.path+"assets/images/placemark.svg",iconImageSize:[45.71,64],iconImageOffset:[-22,-64]}));t.geoObjects.add(e)}))}catch(t){console.error(t)}}(),l(),C(),k(),_(),O(),d(),V(),document.querySelector(".sorting-filter")&&document.querySelector(".sorting-filter").addEventListener("change",(function(t){document.querySelector("[data-sort-filter]").innerHTML=t.target.closest(".sorting-filter__label").querySelector(".sorting-filter__txt").innerHTML})),(a=document.querySelector("[data-active-filters]"))&&window.addEventListener("scroll",(function(){var t=document.querySelector(".active-filters-row"),e=document.querySelector(".header__bottom").offsetHeight;a.getBoundingClientRect().top-20-e<=0?t.classList.add("active"):t.classList.remove("active")})),document.querySelectorAll("[data-number-goods]").forEach((function(t){t.addEventListener("click",(function(e){var a=Number(t.querySelector("[data-number-goods-count]").innerHTML);e.target.closest("[data-number-goods-minus]")&&a>0?(2==a&&t.querySelector("[data-number-goods-minus]").classList.add("hide"),t.querySelector("[data-number-goods-count]").innerHTML=a-1):e.target.closest("[data-number-goods-plus]")&&(1==a&&t.querySelector("[data-number-goods-minus]").classList.remove("hide"),t.querySelector("[data-number-goods-count]").innerHTML=a+1)}))})),function(){var t=document.querySelectorAll("[data-header-modal]"),e=document.querySelectorAll("[data-filter-drop]"),a=document.querySelectorAll("[data-popup]");t.forEach((function(t){t.querySelectorAll("a").forEach((function(t){t.setAttribute("tabindex","-1")})),t.querySelectorAll("input").forEach((function(t){t.setAttribute("tabindex","-1")})),t.querySelectorAll("button").forEach((function(t){t.setAttribute("tabindex","-1")}))})),e.forEach((function(t){t.querySelectorAll("a").forEach((function(t){t.setAttribute("tabindex","-1")})),t.querySelectorAll("input").forEach((function(t){t.setAttribute("tabindex","-1")})),t.querySelectorAll("button").forEach((function(t){t.setAttribute("tabindex","-1")}))})),a.forEach((function(t){t.querySelectorAll("input").forEach((function(t){t.setAttribute("tabindex","-1")})),t.querySelectorAll("a").forEach((function(t){t.setAttribute("tabindex","-1")})),t.querySelectorAll("button").forEach((function(t){t.setAttribute("tabindex","-1")}))}))}(),document.addEventListener("keydown",(function(t){"Escape"==t.code&&(document.querySelector(".modals-container.active")||document.querySelector(".active[data-popup]")?(document.querySelector(".body.modal-open").classList.remove("modal-open"),document.querySelector(".modals-container.active").classList.remove("active"),document.querySelectorAll(".active[data-popup]").forEach((function(t){t.classList.remove("active")}))):document.querySelector(".active[data-filter-drop]")?document.querySelector(".active[data-filter-drop]").classList.remove("active"):document.querySelector(".active[data-header-modal]")&&(document.querySelector(".active[data-header-modal]").classList.remove("active"),document.querySelector(".body.modal-open").classList.remove("modal-open")))})),document.querySelector("[data-show-height]")&&document.querySelector("[data-show-diameter]")&&(document.querySelector("[data-show-height]").innerHTML=document.querySelector(".product-top-img__cigar-size").getAttribute("data-cigar-height"),document.querySelector("[data-show-diameter]").innerHTML=document.querySelector(".product-top-img__cigar-size").getAttribute("data-cigar-diameter")),(n=document.querySelectorAll(".cart-promocode")).length&&n.forEach((function(t){var e=t.querySelector(".cart-promocode__input"),a=t.querySelector("[data-event=promo-delete]");e.addEventListener("focusin",(function(e){t.classList.add("active")})),e.addEventListener("input",(function(){e.value.length?(t.classList.add("send-active"),t.classList.remove("delete-active")):t.classList.remove("send-active")})),a&&a.addEventListener("click",(function(e){p(t)})),e.addEventListener("focusout",(function(a){t.classList.remove("active"),t.classList.remove("send-active"),e.value&&t.classList.add("delete-active")}))})),document.addEventListener("click",(function(t){I(t,"data-popup-button","data-popup"),U(t,"data-filter-btn","data-filter-drop"),function(t){t.target.closest(".catalog-card__fav")?t.target.closest(".catalog-card__fav").classList.toggle("active"):t.target.closest(".product-button-fav")&&t.target.closest(".product-button-fav").classList.toggle("active")}(t),function(t){t.target.closest("[data-card-btn]")&&!t.target.closest(".catalog-card--small")&&(t.target.closest("[data-card-btn-parent].in-cart")?(t.target.closest("[data-card-btn-parent]").classList.remove("in-cart"),s.matches?t.target.closest("[data-card-btn]").innerHTML="Добавить в корзину":t.target.closest("[data-card-btn]").innerHTML="В корзину"):(t.target.closest("[data-card-btn-parent]").classList.add("in-cart"),t.target.closest("[data-card-btn]").innerHTML="В корзине",m()))}(t),function(t){var e=t.target.closest("[data-filter-drop]"),a=t.target.closest(".filters-popup"),n=t.target.closest(".category-filter-btn"),r=document.querySelector("[data-mob-filters]");if((e||a)&&n&&s.matches)n.classList.toggle("active");else if(a&&n&&!s.matches)if(t.target.closest("[data-mob-filters]"))t.target.closest("[data-mob-filters]")&&(n.remove(),document.querySelector(".filters-popup").querySelectorAll(".category-filter-btn.active").forEach((function(t){t.textContent==n.textContent&&t.classList.remove("active")})),r.innerHTML||r.classList.remove("active"));else if(n.classList.contains("active"))n.classList.remove("active"),document.querySelector("[data-mob-filters]").querySelectorAll(".category-filter-btn.active-filter").forEach((function(t){t.textContent==n.textContent&&t.remove()})),r.innerHTML||r.classList.remove("active");else{n.classList.add("active"),r.classList.add("active");var o=n.innerHTML;r.insertAdjacentHTML("beforeend",'<button class="category-filter-btn button--clean active-filter">'.concat(o,"</button>"))}t.target.closest(".drinks-filters-item")&&t.target.closest(".drinks-filters-item").classList.toggle("active")}(t),function(t){if(t.target.closest("[data-anchor-btn]")){t.preventDefault(),document.querySelectorAll("[data-anchor-target]").forEach((function(t){t.insertAdjacentHTML("afterbegin",'<div class="anchor"></div>')}));var e=t.target.closest("[data-anchor-btn]").getAttribute("data-anchor-btn");document.querySelector("[data-anchor-target='".concat(e,"']")).querySelector(".anchor").scrollIntoView({behavior:"smooth",block:"start"})}}(t),function(t){if(t.target.closest("a")&&!t.target.closest("a").hasAttribute("data-nolink")){t.preventDefault();var e=t.target.closest("a").getAttribute("href");document.querySelector(".modals-container").classList.add("fade"),setTimeout((function(){window.location.assign(e)}),600)}}(t),G(t),t.target.closest("[data-cookie-close]")&&document.querySelector(".cookie.active").classList.remove("active"),t.target.closest("[data-plug-close]")&&(document.querySelector(".plug-popup.active").classList.remove("active"),document.querySelector(".modals-container.plug").classList.remove("plug"))})),s.matches&&document.querySelectorAll("[data-header-btn]").forEach((function(t){t.addEventListener("mouseenter",(function(t){U(t,"data-header-btn","data-header-modal",!0)}))}))})),window.addEventListener("load",(function(t){var e,a;(e=document.querySelectorAll("[data-main-video]")).length&&s.matches?e.forEach((function(t){t.setAttribute("src","".concat(window.config.path,"assets/videos/main-video-comp.mp4")),t.play(),t.setAttribute("autoplay","")})):e.length&&!s.matches&&e.forEach((function(t){t.setAttribute("src","".concat(window.config.path,"assets/videos/main-video-comp-mob.mp4")),t.play(),t.setAttribute("autoplay","")})),(a=document.querySelectorAll("[data-filter-btn]")).length&&a.forEach((function(t){if("6"!=t.getAttribute("data-filter-btn")){var e=document.querySelector(".filter-drops-btns"),a=e.getBoundingClientRect().left,n=t.getAttribute("data-filter-btn"),r=document.querySelector("[data-filter-drop='".concat(n,"']")),o=t.getBoundingClientRect().left-a-10;if(r.style.left=o>0?"".concat(o,"px"):"0px",document.documentElement.clientWidth-r.getBoundingClientRect().right<a){var i=e.getBoundingClientRect().width-o;r.style.width="".concat(i,"px")}}})),document.querySelector("body").classList.remove("no-transition"),N(t),f(),B(),Z(),function(){var t=document.querySelector(".header"),e=window.pageYOffset;if(t&&(s.matches||document.querySelector("[data-category-page]"))){var a=function(){var a=window.pageYOffset;Math.abs(e-a)>=1&&(a>e?t.classList.add("header--short"):t.classList.remove("header--short")),e<1&&t.classList.remove("header--short"),e=a};window.addEventListener("scroll",(function t(){a(),setTimeout((function(){a(),window.addEventListener("scroll",t,{once:!0})}),1e3/120)}),{once:!0})}}(),F()})),window.addEventListener("scroll",(function t(){var e=setTimeout((function(){clearTimeout(e),L().refresh(),window.addEventListener("scroll",t)}),1e3);window.removeEventListener("scroll",t)}))}},a={};function n(t){var r=a[t];if(void 0!==r)return r.exports;var o=a[t]={exports:{}};return e[t].call(o.exports,o,o.exports,n),o.exports}n.m=e,t=[],n.O=(e,a,r,o)=>{if(!a){var i=1/0;for(l=0;l<t.length;l++){for(var[a,r,o]=t[l],c=!0,s=0;s<a.length;s++)(!1&o||i>=o)&&Object.keys(n.O).every((t=>n.O[t](a[s])))?a.splice(s--,1):(c=!1,o<i&&(i=o));if(c){t.splice(l--,1);var d=r();void 0!==d&&(e=d)}}return e}o=o||0;for(var l=t.length;l>0&&t[l-1][2]>o;l--)t[l]=t[l-1];t[l]=[a,r,o]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={143:0};n.O.j=e=>0===t[e];var e=(e,a)=>{var r,o,[i,c,s]=a,d=0;if(i.some((e=>0!==t[e]))){for(r in c)n.o(c,r)&&(n.m[r]=c[r]);if(s)var l=s(n)}for(e&&e(a);d<i.length;d++)o=i[d],n.o(t,o)&&t[o]&&t[o][0](),t[i[d]]=0;return n.O(l)},a=self.webpackChunk=self.webpackChunk||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))})();var r=n.O(void 0,[829],(()=>n(895)));r=n.O(r)})();